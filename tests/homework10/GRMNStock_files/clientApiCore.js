Date.prototype.getMonthOneBased=function(){return this.getMonth()+1};Date.prototype.getFormattedDay=function(){if(!!this.dateFormat===false){MDSnG.Utilities.Logger.log("cannot format day, property dateFormat has to be defined");return this.getDate()}var b="d";var d=new RegExp("["+b+"]+","gi");var c=this.dateFormat.match(d);var a=""+this.getDate();if(c!==null&&typeof c!=="undefined"){if(c.length>1){MDSnG.Utilities.Logger.log("cannot format day, too many occurrences in format string");return this.getFullYear()}if(c[0].length>a.length){while(c[0].length>a.length){a="0"+a}}else{if(c[0].length<a.length){a=a.substr(a.length-c[0].length)}}}return a};Date.prototype.getFormattedMonth=function(){if(!!this.dateFormat===false){MDSnG.Utilities.Logger.log("cannot format month, property dateFormat has to be defined");return this.getMonthOneBased()}var b="m";var d=new RegExp("["+b+"]+","gi");var c=this.dateFormat.match(d);var a=""+this.getMonthOneBased();if(c!==null&&typeof c!=="undefined"){if(c.length>1){MDSnG.Utilities.Logger.log("cannot format month, too many occurrences in format string");return this.getFullYear()}if(c[0].length>a.length){while(c[0].length>a.length){a="0"+a}}else{if(c[0].length<a.length){a=a.substr(a.length-c[0].length)}}}return a};Date.prototype.getFormattedYear=function(){if(!!this.dateFormat===false){MDSnG.Utilities.Logger.log("cannot format year, property dateFormat has to be defined");return this.getFullYear()}var b="y";var d=new RegExp("["+b+"]+","gi");var c=this.dateFormat.match(d);var a=""+this.getFullYear();if(c!==null&&typeof c!=="undefined"){if(c.length>1){MDSnG.Utilities.Logger.log("cannot format year, too many occurrences in format string");return this.getFullYear()}if(c[0].length>a.length){while(c[0].length>a.length){a="0"+a}}else{if(c[0].length<a.length){a=a.substr(a.length-c[0].length)}}}return a};Date.prototype.getFormattedDate=function(){if(!!this.dateFormat===false){MDSnG.Utilities.Logger.log("cannot format date, property dateFormat has to be defined");return[this.getDate(),this.getMonthOneBased(),this.getYear()].join(".")}return this.dateFormat.replace(/[d]+/gi,this.getFormattedDay()).replace(/[m]+/gi,this.getFormattedMonth()).replace(/[y]+/gi,this.getFormattedYear())};Date.prototype.stdTimezoneOffset=function(){var a=new Date(this.getFullYear(),0,1);var b=new Date(this.getFullYear(),6,1);return Math.max(a.getTimezoneOffset(),b.getTimezoneOffset())};Date.prototype.isDstObserved=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};var MDSnG;(function(b){var a;(function(e){var d=b.ClientConfiguration.Configuration;var c=(function(){function f(){}f.getConfiguration=function(){return f.clientConfig};f.getConfigurationObject=function(g){var h=null;if(typeof(f.clientConfig)!=="undefined"&&g in f.clientConfig){h=JSON.parse(JSON.stringify(f.clientConfig[g]))}return h};f.clientConfig=new d().getConfiguration();return f}());e.ConfigManager=c})(a=b.ConfigurationManager||(b.ConfigurationManager={}))})(MDSnG||(MDSnG={}));var MDSnG;(function(b){var a;(function(h){var c=b.ConfigurationManager.ConfigManager;var f;(function(k){k[k.roomID=0]="roomID";k[k.Ask=1]="Ask";k[k.AskSize=2]="AskSize";k[k.AskTimestamp=3]="AskTimestamp";k[k.Bid=4]="Bid";k[k.BidSize=5]="BidSize";k[k.BidTimestamp=6]="BidTimestamp";k[k.Timestamp=7]="Timestamp";k[k.Quotime=8]="Quotime";k[k.CurrencyRate=9]="CurrencyRate";k[k.CurrencyRateDate=10]="CurrencyRateDate";k[k.float1=11]="float1";k[k.float2=12]="float2";k[k.long1=13]="long1";k[k.long2=14]="long2";k[k.Mid=15]="Mid";k[k.MidSize=16]="MidSize";k[k.MidTimestamp=17]="MidTimestamp";k[k.ChangePer=18]="ChangePer";k[k.ChangeAbs=19]="ChangeAbs"})(f||(f={}));var j=(function(){function k(){this.style="decimal";this.currency="";this.curencyDisplay="";this.useGrouping=true;this.precision=2}return k}());h.NumberFormatterOptions=j;var g=(function(){function k(){}k.prototype.formatNumber=function(o,l,n){var m;return m};return k}());h.Formatter=g;var i=(function(){function k(l,m){this.userPageSettings=c.getConfigurationObject("PageSettings");this.enableDebugger=this.userPageSettings.debuggerAlerts||false;this.localeMatcher=!!m===false?l:m.localeMatcher;this.options=!!m!==false?m.options:b.Utilities.Generator.generateDefaultNumberFormatterOptions()}k.prototype.format=function(o,m){var n=o;if(!!o!==false){try{return n.toLocaleString(this.localeMatcher,this.options)}catch(l){if(!!this.enableDebugger&&this.enableDebugger){console.log(l)}return"-"}}else{return"_"}};k.prototype.setLocalMatcher=function(l){this.localeMatcher=l};return k}());h.NumberFormatter=i;var e=(function(){function k(){this.useTwelveHourFormat=false;this.displayDate=false;this.dateFormat="dd.MM.yyyy";this.utcToApplicationOffset=0}return k}());h.DateFormatterOptions=e;var d=(function(){function k(l,m){this.currentTimeZoneOffsetInHours=0;this.localeMatcher=!!m===false?l:m.localeMatcher;this.options=!!m!==false?m.options:b.Utilities.Generator.generateDefaultDateFormatterOptions();this.currentTimeZoneOffsetInHours=new Date().getTimezoneOffset()/60}k.prototype.format=function(m,l){return this.formatTimeStamp("",m,this.options)};k.prototype.formatTimeStamp=function(m,q,p){if(!!q===false){b.Utilities.Logger.log("invalid Date");return}var l=new Date(q);var n="";if(p.displayDate){n=this.formatDate(l,p.dateFormat)+" "}var o=this.formatTime(l,p.useTwelveHourFormat);return n+o};k.prototype.formatDate=function(l,m){l.dateFormat=m;return l.getFormattedDate()};k.prototype.formatTime=function(m,v){var u=new Date();var l=u.isDstObserved()?this.options.utcToApplicationOffset+1:this.options.utcToApplicationOffset;if(l!==0&&!!window.utcTimeOffsetToApplication){l=parseFloat(window.utcTimeOffsetToApplication)}var o=m.getHours()+this.currentTimeZoneOffsetInHours+l;var q=m.getMinutes();var s=m.getSeconds();var r="";if(v){r="AM";if(o==12){r="PM"}if(o<0){o=o+12;r="PM"}if(o>12){o=o-12;r="PM"}}else{if(o>23){o=o-24}if(o<0){o=o+24}}var p=q.toString().length<2?"0"+q.toString():q.toString();var t=s.toString().length<2?"0"+s.toString():s.toString();var n=o+":"+p+":"+t;if(o<10){n="0"+n}if(v){n=n+" "+r}return n};k.prototype.setLocalMatcher=function(l){this.localeMatcher=l};return k}());h.DateFormatter=d})(a=b.Formatter||(b.Formatter={}))})(MDSnG||(MDSnG={}));var __extends=(this&&this.__extends)||(function(){var a=function(e,c){a=Object.setPrototypeOf||({__proto__:[]} instanceof Array&&function(g,f){g.__proto__=f})||function(g,f){for(var h in f){if(f.hasOwnProperty(h)){g[h]=f[h]}}};return a(e,c)};return function(f,e){a(f,e);function c(){this.constructor=f}f.prototype=e===null?Object.create(e):(c.prototype=e.prototype,new c())}})();var MDSnG;(function(b){var a;(function(d){var l=b.Formatter.DateFormatter;var q=b.ConfigurationManager.ConfigManager;var w=b.Formatter.NumberFormatter;var c;(function(E){E[E.PushTable=1]="PushTable";E[E.ScrollPushTable=2]="ScrollPushTable";E[E.HighChartsPushTable=3]="HighChartsPushTable";E[E.SnapshotHeadline=4]="SnapshotHeadline";E[E.BoerseOnlineHeaderMarketBox=5]="BoerseOnlineHeaderMarketBox";E[E.ChartIqTable=6]="ChartIqTable";E[E.VueTable=7]="VueTable"})(c=d.AnimationContextType||(d.AnimationContextType={}));var f;(function(E){E[E.background=0]="background";E[E.color=1]="color"})(f=d.AnimationType||(d.AnimationType={}));var i;(function(E){E[E.positive=0]="positive";E[E.negative=1]="negative";E[E.none=2]="none"})(i=d.ChangeDirection||(d.ChangeDirection={}));var p;(function(E){E[E.Number=0]="Number";E[E.Time=1]="Time";E[E.Percent=2]="Percent"})(p=d.FormatterTypes||(d.FormatterTypes={}));var m;(function(E){E[E.roomID=0]="roomID";E[E.Ask=1]="Ask";E[E.AskSize=2]="AskSize";E[E.AskTimestamp=3]="AskTimestamp";E[E.Bid=4]="Bid";E[E.BidSize=5]="BidSize";E[E.BidTimestamp=6]="BidTimestamp";E[E.Timestamp=7]="Timestamp";E[E.Quotime=8]="Quotime";E[E.CurrencyRate=9]="CurrencyRate";E[E.CurrencyRateDate=10]="CurrencyRateDate";E[E.float1=11]="float1";E[E.float2=12]="float2";E[E.long1=13]="long1";E[E.long2=14]="long2";E[E.Mid=15]="Mid";E[E.MidSize=16]="MidSize";E[E.MidTimestamp=17]="MidTimestamp";E[E.ChangePer=18]="ChangePer";E[E.ChangeAbs=19]="ChangeAbs";E[E.Spread=20]="Spread";E[E.Trend=21]="Trend";E[E.Last=22]="Last";E[E.LastSize=23]="LastSize";E[E.LastTimestamp=24]="LastTimestamp";E[E.SpreadAbs=25]="SpreadAbs"})(m||(m={}));var y;(function(E){E[E.room=0]="room";E[E.field=1]="field";E[E.table=2]="table";E[E.source=3]="source";E[E.item=4]="item"})(y||(y={}));var s=["div","span"];var h;(function(E){E[E.positive=0]="positive";E[E.negative=1]="negative";E[E.neutral=2]="neutral"})(h||(h={}));var C="Timestamp";var u="$";var v="mdsng";var n=";";var t=["up","down"];var o=(function(){function E(){}E.createFormatter=function(F,I){var G;var H=q.getConfigurationObject("FormatterSettings");if(!!F!==false){switch(F.toLocaleLowerCase()){case m[m.Ask].toLocaleLowerCase():case m[m.AskSize].toLocaleLowerCase():case m[m.Bid].toLocaleLowerCase():case m[m.BidSize].toLocaleLowerCase():case m[m.float1].toLocaleLowerCase():case m[m.float2].toLocaleLowerCase():case m[m.Mid].toLocaleLowerCase():case m[m.ChangeAbs].toLocaleLowerCase():case m[m.Last].toLocaleLowerCase():case m[m.LastSize].toLocaleLowerCase():case m[m.SpreadAbs].toLocaleLowerCase():G=new w(H.NumberFormatter.localeMatcher,H.NumberFormatter);break;case m[m.ChangePer].toLocaleLowerCase():case m[m.Spread].toLocaleLowerCase():G=new w(H.PercentFormatter.localeMatcher,H.PercentFormatter);break;case m[m.AskTimestamp].toLocaleLowerCase():case m[m.BidTimestamp].toLocaleLowerCase():case m[m.MidTimestamp].toLocaleLowerCase():case m[m.LastTimestamp].toLocaleLowerCase():G=new l(H.DateTimeFormatter.localeMatcher,H.DateTimeFormatter);break;default:G=null;break}}return G};E.userFormatterSettings=q.getConfigurationObject("FormatterSettings");return E}());d.FormatterFactory=o;var e=(function(){function E(){}E.prototype.geTimeFormatter=function(F){};E.prototype.createDomElementTag=function(G,H){if(!!G===false){return null}var F=document.createElement(G);if(!!H!==false){F.innerHTML=H}return F};E.prototype.createTickRowFromPushItem=function(M,O,L){var P=M.cloneNode(true);var H=M.getElementsByTagName("div");for(var F=0,I=H;F<I.length;F++){var G=I[F];var J=G.getAttribute("data-field").toString();if(!!J!==false){var K=this.getRightFormatter(J,L);G.innerHTML=K.format(this.getPushedValue(O,J))}}var N=M.cloneNode(true);return N};E.prototype.isTimeFieldObserver=function(F){var G=false;if(!!F!==false){switch(F.toLocaleLowerCase()){case m[m.AskTimestamp].toLocaleLowerCase():case m[m.BidTimestamp].toLocaleLowerCase():case m[m.MidTimestamp].toLocaleLowerCase():case m[m.LastTimestamp].toLocaleLowerCase():G=true;break;default:G=false}}return G};E.prototype.getRightFormatter=function(I,J){if(!!I===false){return null}if(!!I!==false){switch(I.toLocaleLowerCase()){case m[m.Ask].toLocaleLowerCase():case m[m.AskSize].toLocaleLowerCase():case m[m.Bid].toLocaleLowerCase():case m[m.BidSize].toLocaleLowerCase():case m[m.float1].toLocaleLowerCase():case m[m.float2].toLocaleLowerCase():case m[m.ChangeAbs].toLocaleLowerCase():case m[m.Mid].toLocaleLowerCase():case m[m.MidSize].toLocaleLowerCase():case m[m.Last].toLocaleLowerCase():case m[m.LastSize].toLocaleLowerCase():case m[m.SpreadAbs].toLocaleLowerCase():for(var H=0,K=J;H<K.length;H++){var N=K[H];if(N[0]===p[p.Number]){return N[1]}}break;case m[m.AskTimestamp].toLocaleLowerCase():case m[m.BidTimestamp].toLocaleLowerCase():case m[m.MidTimestamp].toLocaleLowerCase():case m[m.LastTimestamp].toLocaleLowerCase():for(var F=0,L=J;F<L.length;F++){var N=L[F];if(N[0]===p[p.Time]){return N[1]}}break;case m[m.ChangePer].toLocaleLowerCase():case m[m.Spread].toLocaleLowerCase():for(var G=0,M=J;G<M.length;G++){var N=M[G];if(N[0]===p[p.Percent]){return N[1]}}break;default:break}}return null};E.prototype.getValueToUseForChange=function(J){if(!!J===false){return null}var K=null;var H=["Mid","Bid","Ask","Last"];for(var F=0,I=H;F<I.length;F++){var G=I[F];K=this.getPushedValue(J,G);if(!!K===false){continue}return K}return K};E.prototype.getPushedValue=function(G,F){if(!!F===false){return null}switch(F.toLocaleLowerCase()){case m[m.Ask].toLocaleLowerCase():if(!!G.float1){return G[m[m.float1]]}return G[F];case m[m.Bid].toLocaleLowerCase():if(!!G.float2){return G[m[m.float2]]}return G[F];case m[m.Last].toLocaleLowerCase():return G[F];case m[m.Mid].toLocaleLowerCase():return G[F];case m[m.Spread].toLocaleLowerCase():return this.getSpreadValue(G);case m[m.SpreadAbs].toLocaleLowerCase():return this.getSpreadAbsValue(G);case m[m.AskTimestamp].toLocaleLowerCase():case m[m.BidTimestamp].toLocaleLowerCase():case m[m.MidTimestamp].toLocaleLowerCase():case m[m.LastTimestamp].toLocaleLowerCase():case m[m.BidSize].toLocaleLowerCase():case m[m.AskSize].toLocaleLowerCase():case m[m.MidSize].toLocaleLowerCase():case m[m.LastSize].toLocaleLowerCase():var H=G[F];if(!!H===false||H.toNumber()===0){return NaN}return H.toNumber();default:return null}};E.prototype.resetColor=function(G,F,H){switch(G){case"background":$(H).animate({backgroundColor:F.defaultBackground},"slow");break;case"color":$(H).animate({color:F.defaultColor},"slow");break;default:H.style.backgroundColor=F.defaultColor}return H};E.prototype.setColor=function(G,I,J,F,H){switch(G){case"background":if(!!I===false){I=F.defaultBackground}if(u in window){$(J).animate({backgroundColor:I},"slow")}else{J.style.backgroundColor=I}H(F.animationType,F,J);break;case"color":if(!!I===false){I=F.defaultColor}if(u in window){$(J).animate({color:I},"slow")}else{J.style.color=I}break;case"none":default:break}return J};E.prototype.componentToHex=function(F){var G=F.toString(16);return G.length===1?"0"+G:G};E.prototype.capitalize=function(F){if(!!F===false){return""}return F.charAt(0).toUpperCase()+F.slice(1)};E.prototype.setAttribute=function(H,F){for(var G in H){if(H.hasOwnProperty(G)){if(G in F){if(H[G].toLocaleString().toLocaleLowerCase()==="false"){F[G]=false;continue}if(H[G].toLocaleString().toLocaleLowerCase()==="true"){F[G]=true;continue}F[G]=H[G]}}}};E.prototype.setFormatterUserAttribute=function(H,F){if(!!F===false){return}if("options" in F){var G=F.options;this.setAttribute(H,G)}};E.prototype.setInlineAnimationAttributes=function(G,F){if(!!F===false){return}this.setAttribute(G,F)};E.prototype.getUserInlineConfiguration=function(O,G){var N={};if(O.length>0){for(var F=0,P=O;F<P.length;F++){var I=P[F];if(!!I===false){continue}var J=I.split(":");if(J.length<2){continue}var L=void 0;var M=J[0].split("-");L=M[0];if(M.length>1){for(var H=1;H<M.length;H++){L+=this.capitalize(M[H])}}var K=!!parseInt(J[1])!==false?parseInt(J[1]):J[1];N[L]=K}}return N};E.prototype.setInlineAnimationSettings=function(J,F){if(!!J===false){return}var I={};var H=J.split(n);var G=this.getUserInlineConfiguration(H,F);this.setInlineAnimationAttributes(G,F)};E.prototype.setUserFormatSettings=function(G,L){if(!!G===false){return}var Q={};var J=G.split(n);if(J.length>0){for(var F=0,K=J;F<K.length;F++){var N=K[F];if(!!N===false){continue}var O=N.split(":");if(O.length<2){continue}var H=void 0;var I=O[0].split("-");H=I[0];if(I.length>1){for(var M=1;M<I.length;M++){H+=this.capitalize(I[M])}}var P=parseInt(O[1]);if(!!P!==false){Q[H]=P}else{Q[H]=O[1]}}this.setFormatterUserAttribute(Q,L)}};E.prototype.deepCopy=function(G){try{return JSON.parse(JSON.stringify(G))}catch(F){}return G};E.prototype.isPositiveChange=function(H,J,G){var F=h.neutral;if(!!H===false||!!J===false){return F}var L=G.options.maximumFractionDigits||2;var I=this.deepCopy(H);I=parseFloat(H.toFixed(parseInt(L)));var K=this.deepCopy(J);K=parseFloat(J.toFixed(parseInt(L)));if(I>K){F=h.positive}else{if(I===K){F=h.neutral}else{F=h.negative}}return F};E.prototype.getSpreadValue=function(H){if(!!H===false){return 0}var I=0;var F=H[m[m.Ask]]||NaN;var G=H[m[m.Bid]]||NaN;if(!!F===false||!!G===false||parseInt(G.toLocaleString(),10)===0){return 0}I=(F-G)/G;return I};E.prototype.getSpreadAbsValue=function(H){if(!!H===false){return 0}var I=0;var F=H[m[m.Ask]]||NaN;var G=H[m[m.Bid]]||NaN;if(!!F===false||!!G===false||parseInt(G.toLocaleString(),10)===0){return 0}I=(F-G);return I};return E}());var x=(function(E){__extends(F,E);function F(){return E!==null&&E.apply(this,arguments)||this}F.getInstance=function(){if(this.pushTableInstance===null||typeof(this.pushTableInstance)==="undefined"){this.pushTableInstance=new F()}return this.pushTableInstance};F.prototype.updateTitleBar=function(G){$(document).ready(function(){$(document).attr("title",G)})};F.prototype.updateTitle=function(M,J,N,I){if(!!M===false&&!!J===false||!!N===false){return}var K="";var P=(J-N)/N;var H=J.toFixed(2);var G;if(!!I){var L=E.prototype.getRightFormatter.call(this,"Mid",I);if(!!L){H=L.format(J)}var O=E.prototype.getRightFormatter.call(this,"ChangePer",I);if(!!O){G=O.format(P)}else{G=P.toFixed(2)}}K+=M+" "+H+" ("+G+")";if(!!P){this.updateTitleBar(K)}};F.prototype.applyAnimation=function(aJ){var P=[];for(var N=1;N<arguments.length;N++){P[N-1]=arguments[N]}this.div=aJ;var aH=P[0].length>0?P[0][0]:null;var aM=P[0].length>1?P[0][1]:null;var aI=P[0].length>2?P[0][2]:null;var aO=aI!==null?aI.roomSettings:null;this.settings=aO;var O=q.getConfigurationObject("AnimationSettings");var ap=aI.settings.formatterSettings||null;var aN=aI.settings.pageSettings||null;var ao=aI!==null?aI.formatters:null;var aq=null;var am=!!this.div?this.div.getAttribute("data-field"):null;var aj=!!this.div?this.div.getAttribute("data-animatetitle"):null;var aK=!!this.div?this.div.getAttribute("data-name"):null;var Z="";var ai,ad,ae,aa,ab,aQ;var aF,aL,aB,aG;var ay=false;var Y;if(!!am!==false){ay=am.toLocaleLowerCase()===m[m.ChangeAbs].toLocaleLowerCase()||am.toLocaleLowerCase()===m[m.ChangePer].toLocaleLowerCase();aq=E.prototype.getRightFormatter.call(this,am,ao);var aT=!!this.div!==false&&!!this.div.dataset.format!==false?this.div.dataset.format:null;if(typeof(aT)!=="undefined"&&!!aT!==false){E.prototype.setUserFormatSettings.call(this,aT,aq)}else{aq=o.createFormatter(am,ap)}ai=E.prototype.getPushedValue.call(this,aH,am);if(ay===false&&(ai===0||isNaN(ai)||!!ai===false)){return}if(ay&&!!ai===false){ai=E.prototype.getValueToUseForChange.call(this,aH);var aP=void 0;aP=this.div.getElementsByTagName("span")[0];aQ=(!!aP!==false&&!!aP.dataset.field!==false)?aP.dataset.field:null;if(!!aQ!==false){ai=E.prototype.getPushedValue.call(this,aH,aQ)}if(!!ai===false){return}}else{if(this.isTimeFieldObserver(am)){var V=am.substr(0,am.length-C.length);var az=V.toLocaleLowerCase()===m[m.ChangeAbs].toLocaleLowerCase()||V.toLocaleLowerCase()===m[m.ChangePer].toLocaleLowerCase();if(az===false){aF=aH!==null?E.prototype.getPushedValue.call(this,aH,V):null;aL=aM!==null?E.prototype.getPushedValue.call(this,aM,V):null}else{}}else{aF=aH!==null?E.prototype.getPushedValue.call(this,aH,am):null;aL=aM!==null?E.prototype.getPushedValue.call(this,aM,am):null}}this.pushValueSpans=this.div.getElementsByTagName("span");if(!!this.pushValueSpans===false||this.pushValueSpans.length<1){return false}for(var G=0,H=this.pushValueSpans;G<H.length;G++){var aP=H[G];aq=E.prototype.getRightFormatter.call(this,am,ao);var an=(!!aP!==false&&!!aP.dataset.format!==false)?aP.dataset.format:null;if(!!an===false){aq=o.createFormatter(am,ap)}else{E.prototype.setUserFormatSettings.call(this,an,aq)}if(!!aq===false){return false}var aU=(!!aP!==false&&!!aP.dataset.animation!==false)?aP.dataset.animation:null;if(!!aU!==false){E.prototype.setInlineAnimationSettings.call(this,aU,O)}if(ay){var aS="";var al="";var aC=aP.dataset.jsvalue;if(!!aC===false){continue}aB=parseFloat(aC);if(aP.innerHTML.indexOf("(")===-1){aF=parseFloat(aP.innerHTML)}else{var aR=aP.innerHTML.indexOf("(");aS=aP.innerHTML.substring(aR,aR+1);var ak=aP.innerHTML.indexOf(")");al=aP.innerHTML.substring(ak,ak+1);aF=aP.innerHTML.substring(aR+1,ak-1);aF=parseFloat(aF)}switch(am.toLowerCase()){case"changeper":if(aB===0){return false}aF=(ai-aB)/aB;Z=aF!==null&&aF<0?O.negativeChangeColor:O.positiveChangeColor;aG=aq.format(aF);break;case"changeabs":if(aB===0){return false}aF=ai-aB;Z=aF!==null&&aF<0?O.negativeChangeColor:O.positiveChangeColor;aG=aq.format(aF);var R=false;var aA=false;var Q="";if(aN.Constants.Jquery in window){for(var I=0,at=s;I<at.length;I++){var ar=at[I];R=R||$(this.div).closest(ar).siblings(".arrow-holder").length>0;if(R){Q=ar;break}}if(R&&!!Q){var ax=$(this.div).closest(Q).siblings(".arrow-holder")[0];this.indicatorDiv=$(ax).find(Q+"."+O.indicatorDivClass)[0]}if(!R){R=$(this.div).closest("table").find("span."+O.indicatorDivClass).length>0;if(R){this.indicatorDiv=$(this.div).closest("table").find("span."+O.indicatorDivClass)[0]}}if(!aA){aA=$(this.div.parentElement).find("span.push-currency").length>0;if(aA){this.currencySpan=$(this.div.parentElement).find("span.push-currency")[0]}}if(!R){R=$(this.div.parentElement).find("span."+O.indicatorDivClass).length>0;if(R){this.indicatorDiv=$(this.div.parentElement).find("span."+O.indicatorDivClass)[0]}}if(!R){R=$(this.div).closest("div.row").find("span."+O.indicatorDivClass).length>0;if(R){this.indicatorDiv=$(this.div).closest("div.row").find("span."+O.indicatorDivClass)[0];R=!!this.indicatorDiv.dataset&&this.indicatorDiv.dataset.room===this.div.dataset.room}}}else{R=this.div.parentElement.getElementsByClassName(O.indicatorDivClass).length>0;this.indicatorDiv=this.div.parentElement.getElementsByClassName(O.indicatorDivClass)}if(!!this.indicatorDiv&&!!this.indicatorDiv.dataset&&this.indicatorDiv.dataset.room){R=!!this.indicatorDiv.dataset&&this.indicatorDiv.dataset.room===this.div.dataset.room}if(aA){if(!!this.currencySpan){aa=this.currencySpan.className;ab=this.currencySpan.classList;if(!!ab&&ab.length>0){for(var J=0,ac=ab;J<ac.length;J++){var S=ac[J];var aE="";if(S==="currency"||S==="push-currency"){continue}this.currencySpan=E.prototype.setColor.call(this,O.animationType,Z,this.currencySpan,O,E.prototype.resetColor)}}}}if(R){var aw=null;if(O!==null){aw=!!aF!==false&&aF<0?O.negChangeIndicator:O.posChangeIndicator}if(!!this.indicatorDiv!==false){ad=this.indicatorDiv.className;ae=this.indicatorDiv.classList;if(!!ae&&ae.length>0){for(var K=0,af=ae;K<af.length;K++){var S=af[K];var aE="";if(S==="icon-set"){continue}if(S.indexOf("image_icon_price")!==-1){aE=!!aF&&aF<0?O.downPic:O.upPic}else{var ag="";for(var L=0,av=t;L<av.length;L++){var au=av[L];if(S.indexOf(au)!==-1){ag=au;break}}if(!!ag){aE=!!aF&&aF<0?S.replace(ag,O.negChangeIndicator):S.replace(ag,O.posChangeIndicator)}}if(!!aE&&aE!==S){ae.remove(S);ae.add(aE)}}}else{if(!!ad!==false){var T=ad.split(" ");for(var M=0,U=T;M<U.length;M++){var W=U[M];if(!!W!==false){var X=W.split("-");if(!!X&&X.length>1){if(X[0]==="arrow"&&t.indexOf(X[1])!==-1){var aD=W.replace(X[1],aw);ad=ad.replace(W,aD);this.indicatorDiv.setAttribute("class",ad)}}}}}}}}break;default:break}aP.innerText=aS+aG+al}else{if(!!aL){Y=E.prototype.isPositiveChange.call(this,aF,aL,aq);switch(Y){case h.neutral:Z="";break;case h.positive:Z=O.positiveChangeColor;break;case h.negative:Z=O.negativeChangeColor;break;default:return false}}if(!!ai===false){return false}aP.innerText=aq.format(ai);if(aj==="true"){var ah=aP.dataset.jsvalue;if(!!ah){this.updateTitle(aK,ai,ah,ao)}}}aP=E.prototype.setColor.call(this,O.animationType,Z,aP,O,E.prototype.resetColor)}}aJ=this.div;return aJ};return F}(e));d.PushTable=x;var z=(function(E){__extends(F,E);function F(){var G=E!==null&&E.apply(this,arguments)||this;G.isFirstRun=true;G.removeLastRow=false;G.tableRows=[];G.currentValues=[];return G}F.getInstance=function(){if(this.scrollTableInstance===null||typeof(this.scrollTableInstance)==="undefined"){this.scrollTableInstance=new F()}return this.scrollTableInstance};F.prototype.createNewTableRow=function(J,I){var K,H,G;K=E.prototype.createDomElementTag.call(this,"div");K.setAttribute("data-field","BidTimestamp");return null};F.prototype.changeInitialRow=function(L){var H=this.initialRow.getElementsByTagName("div");for(var K=0;K<H.length;K++){var G=H[K];var I=G.getAttribute("data-field").toString();if(!!I!==false){if(I.toLocaleLowerCase()===m[m.Trend].toLocaleLowerCase()){$(G).removeClass(function(P,O){return(O.match(/\bimage_icon_price\S+/g)||[]).join(" ")});$(G).addClass(this.currentTrendClass)}var J=this.getRightFormatter(I,this.formatters);var M=!!G.dataset.format!==false?G.dataset.format:null;if(M!==null){E.prototype.setUserFormatSettings.call(this,M,J)}else{J=o.createFormatter(I,this.formatterSettings)}var N=this.getPushedValue(L,I);if(!!N!==false){G.innerHTML=J.format(N)}}}$(this.initialRow).animate({backgroundColor:this.animationSettings.flashColor},"slow");E.prototype.resetColor.call(this,"background",this.animationSettings,this.initialRow)};F.prototype.isValidValues=function(K){var H=this.initialRow.getElementsByTagName("div");var L=true;for(var J=0;J<H.length;J++){var G=H[J];var I=G.getAttribute("data-field").toString();L=L&&!!I!==false;if(I.toLocaleLowerCase()===m[m.Trend].toLocaleLowerCase()){continue}var M=this.getPushedValue(K,I);L=L&&!!M!==false}return L};F.prototype.createTicksFromPushItem=function(I){var J=[];if(u&&u in window){$(this.initialRow).parent().children().each(function(){if(!!$(this).attr("data-source")!==false&&$(this).attr("data-source")===v&&!!$(this).attr("data-table")!==false&&$(this).attr("data-table")===c.ScrollPushTable.toString()){J.push(this)}})}this.tableRows=J;if(this.removeLastRow||this.currentValues.length>=this.maxRow){var H=$(this.initialRow).parent().find("tr:last-child");$(H).remove()}if(this.isValidValues(I)){if(this.isFirstRun===false){$(this.initialRow).removeClass("displaynone");var G=$(this.initialRow).clone(false);E.prototype.resetColor.call(this,"background",this.animationSettings,G);this.changeInitialRow(I);$(this.initialRow).after(G)}else{this.changeInitialRow(I);$(this.initialRow).removeClass("displaynone")}return true}return false};F.prototype.applyAnimation=function(M){var H=[];for(var G=1;G<arguments.length;G++){H[G-1]=arguments[G]}this.divs=M.getElementsByTagName("div");this.initialRow=M;var K=H[0].length>0?H[0][0]:null;var O=H[0].length>1?H[0][1]:null;var L=H[0].length>2?H[0][2]:null;this.roomSettings=L!==null?L.roomSettings:null;this.pageSettings=L!==null?L.pageSettings:null;this.observerSettings=L!==null?L.settings:null;this.animationSettings=q.getConfigurationObject("AnimationSettings");this.formatterSettings=L.settings.formatterSettings||null;this.formatters=L.formatters;this.currentTrendClass=this.animationSettings.defaultPic;if(this.observerSettings!=null&&!!this.animationSettings!==false){var P=!!M!==false&&!!M.dataset.format!==false?M.dataset.format:null;if(!!P){E.prototype.setInlineAnimationSettings.call(this,P,this.animationSettings)}var Q=(!!M!==false&&!!M.dataset.animation!==false)?M.dataset.animation:null;if(!!Q!==false){E.prototype.setInlineAnimationSettings.call(this,Q,this.animationSettings)}this.maxRow=this.animationSettings.maxRows||null;if(this.maxRow===null){return false}if(this.isValidValues(K)){this.isFirstRun=this.currentValues.length<1;if(this.isFirstRun===false){var N=O.Bid.toFixed(2);var J=K.Bid.toFixed(2);if(N===J){this.currentTrendClass=this.animationSettings.defaultPic}else{this.currentTrendClass=N<J?this.animationSettings.upPic:this.animationSettings.downPic}}if(this.currentValues.length>=this.maxRow){if(this.removeLastRow===false){this.removeLastRow=true}this.currentValues.pop()}var I=this.createTicksFromPushItem(K);if(I){this.currentValues.push(K)}}}return M};return F}(e));d.ScrollPushTable=z;var r=(function(E){__extends(F,E);function F(){var G=E!==null&&E.apply(this,arguments)||this;G.quotes={};return G}F.getInstance=function(){if(this.highChartsTableInstance===null||typeof(this.highChartsTableInstance)==="undefined"){this.highChartsTableInstance=new F()}return this.highChartsTableInstance};F.prototype.animateHighChart=function(H,I,G){if(!!window.Highcharts!==false||!!G!==false){if(typeof(G)=="object"){if(typeof(G.series)=="object"){var J=false;$.each(G.series,function(S,R){if(R.type==="line"&&typeof(R.pushOptions)==="object"&&typeof(R.pushOptions.symbol)==="string"){if(!!H!==false&&R.pushOptions.symbol.toLocaleLowerCase()===H.id.domIdentifier.toLocaleLowerCase()){var P=typeof(I)!=="undefined"&&I!==null?I:null;var O=void 0,Q=void 0;var K=H.settings.animationSettings;if(!!K.useFIFOByAddPointOnChart){J=K.useFIFOByAddPointOnChart}if(!!P.quotetime!==false&&P.quotetime.length>0){var M=new Date();var N=0;var L=P.quotetime.split(":");if(M.getFullYear()<1900){N=M.getFullYear()+1900}else{N=M.getFullYear()}Q=P.quotetime;switch(R.pushOptions.quoteField.toLowerCase()){case"bid":O=P.bid;break;case"ask":O=P.ask;break;case"last":O=P.last;break;case"reference":O=P.reference;break;case"mid":O=P.mid;break}L[0]=parseInt(L[0]);if(!!window.utcTimeOffsetToApplication){L[0]+=window.utcTimeOffsetToApplication}Q=new Date(Date.UTC(N,M.getMonth(),M.getDate(),L[0],parseInt(L[1]),parseInt(L[2]))).getTime();if(!!O===false){return}R.addAnimatedPoint({id:"po_"+H.id.domIdentifier+"_"+Q,x:Q,y:parseFloat(O)},true,J,true)}}}})}}}};F.prototype.applyAnimation=function(P){var H=[];for(var G=1;G<arguments.length;G++){H[G-1]=arguments[G]}this.div=P;var N=H[0].length>0?H[0][0]:null;var O=H[0].length>2?H[0][2]:null;var M=O!==null?O.formatters:null;if(!!M[0]!==false&&!!M[0][1]!==false){M[0][1].setLocalMatcher("en-US")}var L=!!this.div!==false?this.div.getAttribute("data-field"):null;var I=L.concat(C);if(!!L!==false){if(!!this.timeFormatter===false){this.timeFormatter=E.prototype.getRightFormatter.call(this,m[m.BidTimestamp],M)}var K=N!==null?E.prototype.getPushedValue.call(this,N,L):null;var J=N!==null?E.prototype.getPushedValue.call(this,N,I):null;if(!!K===false||!!J===false){return false}this.quotes[L.toLowerCase()]=K;this.quotes.quotetime=this.timeFormatter.format(J);this.quotes.timestamp=J;if(this.div.id in window&&!!window[this.div.id]!==false){this.chart=window[this.div.id];this.animateHighChart(O,this.quotes,this.chart)}}return this.div};return F}(e));d.HighChartsPushTable=r;var A=(function(E){__extends(F,E);function F(){return E!==null&&E.apply(this,arguments)||this}F.getInstance=function(){if(this.snapshotHeadline===null||typeof(this.snapshotHeadline)==="undefined"){this.snapshotHeadline=new F()}return this.snapshotHeadline};F.prototype.applyAnimation=function(Z){var K=[];for(var I=1;I<arguments.length;I++){K[I-1]=arguments[I]}this.div=Z;var X=K[0].length>0?K[0][0]:null;var ab=K[0].length>1?K[0][1]:null;var Y=K[0].length>2?K[0][2]:null;var ad=Y!==null?Y.roomSettings:null;this.settings=ad;var J=Y.settings.animationSettings||null;var T=Y.settings.formatterSettings||null;var ac=Y.settings.pageSettings||null;var S=Y!==null?Y.formatters:null;var U=null;var R=!!this.div!==false?this.div.getAttribute("data-field"):null;var M="";var O,N;var W,aa,V;if(!!R!==false){U=E.prototype.getRightFormatter.call(this,R,S);var ah=!!this.div!==false&&!!this.div.dataset.format!==false?this.div.dataset.format:null;if(!!ah!==false&&typeof(ah)!=="undefined"){E.prototype.setUserFormatSettings.call(this,ah,U)}else{U=o.createFormatter(R,T)}O=E.prototype.getPushedValue.call(this,X,R);if(!!O===false){return false}if(this.isTimeFieldObserver(R)){var L=R.substr(0,R.length-C.length);W=X!==null?E.prototype.getPushedValue.call(this,X,L):null;aa=ab!==null?E.prototype.getPushedValue.call(this,ab,L):null}else{W=X!==null?E.prototype.getPushedValue.call(this,X,R):null;aa=ab!==null?E.prototype.getPushedValue.call(this,ab,R):null}M=aa!==null&&aa>W?J.negativeChangeColor:J.positiveChangeColor;this.pushValueSpans=Z.getElementsByClassName(J.pushValueSpanClass);if(!!U!==false){if(this.pushValueSpans!==null&&this.pushValueSpans.length>0){this.pushValueSpans[0].innerText=U.format(O);this.pushValueSpans[0]=E.prototype.setColor.call(this,J.animationType,M,this.pushValueSpans[0],J,E.prototype.resetColor)}else{if(!!Z.firstChild!==false){Z.firstChild.nodeValue=U.format(O)}else{Z.innerText=U.format(O);Z=E.prototype.setColor.call(this,J.animationType,M,Z,J,E.prototype.resetColor)}}}}else{this.pushValueSpans=Z.getElementsByTagName("span");if(!!this.pushValueSpans===false||this.pushValueSpans.length<1){return false}this.indicatorDivs=(ac.Constants.Jquery in window)?$("div[class^='"+J.indicatorDivClass+"'"):document.getElementsByClassName(J.indicatorDivClass);for(var G=0,H=this.pushValueSpans;G<H.length;G++){var ae=H[G];R=ae.dataset.field;if(!!R!==false){var ag="";var Q="";U=E.prototype.getRightFormatter.call(this,R,S);var ah=!!ae!==false&&!!ae.dataset.format!==false?ae.dataset.format:null;if(ah!==null){E.prototype.setUserFormatSettings.call(this,ah,U)}else{U=o.createFormatter(R,T)}V=ae.dataset.jsvalue;if(!!V===false){continue}V=parseFloat(ae.dataset.jsvalue);if(ae.innerHTML.indexOf("(")===-1){W=parseFloat(ae.innerHTML)}else{var af=ae.innerHTML.indexOf("(");ag=ae.innerHTML.substring(af,af+1);var P=ae.innerHTML.indexOf(")");Q=ae.innerHTML.substring(P,P+1);W=ae.innerHTML.substring(af+1,P-1);W=parseFloat(ae.innerHTML)}O=E.prototype.getPushedValue.call(this,X,"Mid");if(!!O!==false){switch(R.toLowerCase()){case"changeper":W=(O-V)/V;M=W!==null&&W<0?J.negativeChangeColor:J.positiveChangeColor;W=U.format(W);break;case"changeabs":W=O-V;M=W!==null&&W<0?J.negativeChangeColor:J.positiveChangeColor;if(J!==null){N=!!W!==false&&W<0?J.indicatorDivClass+" "+J.negChangeIndicator:J.indicatorDivClass+" "+J.posChangeIndicator}W=U.format(W);if(this.indicatorDivs!==null&&this.indicatorDivs.length>0){this.indicatorDivs[0].className=N}break;default:break}ae.innerText=ag+W+Q;ae=E.prototype.setColor.call(this,J.animationType,M,ae,J,E.prototype.resetColor)}}}}Z=this.div;return Z};F.snapshotHeadline=null;return F}(e));d.SnapshotHeadline=A;var g=(function(E){__extends(F,E);function F(){return E!==null&&E.apply(this,arguments)||this}F.getInstance=function(){if(this._instance===null||typeof(this._instance)==="undefined"){this._instance=new F()}return this._instance};F.prototype.applyAnimation=function(af){var K=[];for(var I=1;I<arguments.length;I++){K[I-1]=arguments[I]}this.div=af;var ad=K[0].length>0?K[0][0]:null;var ah=K[0].length>1?K[0][1]:null;var ae=K[0].length>2?K[0][2]:null;var aj=ae!==null?ae.roomSettings:null;this.settings=aj;var J=q.getConfigurationObject("AnimationSettings");var V=ae.settings.formatterSettings||null;var ai=ae.settings.pageSettings||null;var U=ae!==null?ae.formatters:null;var W=null;var S=!!this.div!==false?this.div.getAttribute("data-field"):null;var N="";var P,O;var ab,ag,Z,ac;var X=false;var M;if(!!S!==false){X=S.toLocaleLowerCase()===m[m.ChangePer].toLocaleLowerCase();W=E.prototype.getRightFormatter.call(this,S,U);var an=!!this.div!==false&&!!this.div.dataset.format!==false?this.div.dataset.format:null;if(!!an!==false&&an!==null){E.prototype.setUserFormatSettings.call(this,an,W)}else{W=o.createFormatter(S,V)}P=E.prototype.getPushedValue.call(this,ad,S);if(X===false&&(P===0||isNaN(P))){return false}if(X&&!!P===false){P=E.prototype.getPushedValue.call(this,ad,"Mid")}else{if(this.isTimeFieldObserver(S)){var L=S.substr(0,S.length-C.length);var Y=L.toLocaleLowerCase()===m[m.ChangeAbs].toLocaleLowerCase()||L.toLocaleLowerCase()===m[m.ChangePer].toLocaleLowerCase();if(Y===false){ab=ad!==null?E.prototype.getPushedValue.call(this,ad,L):null;ag=ah!==null?E.prototype.getPushedValue.call(this,ah,L):null}else{}}else{ab=ad!==null?E.prototype.getPushedValue.call(this,ad,S):null;ag=ah!==null?E.prototype.getPushedValue.call(this,ah,S):null}}this.pushValueSpans=this.div.getElementsByTagName("span");if(!!this.pushValueSpans===false||this.pushValueSpans.length<1){return false}for(var G=0,H=this.pushValueSpans;G<H.length;G++){var ak=H[G];W=E.prototype.getRightFormatter.call(this,S,U);var T=(!!ak!==false&&!!ak.dataset.format!==false)?ak.dataset.format:null;if(!!T===false){W=o.createFormatter(S,V)}else{E.prototype.setUserFormatSettings.call(this,T,W)}if(!!W===false){return false}if(X){var am="";var R="";var aa=ak.dataset.jsvalue;if(!!aa===false){continue}Z=parseFloat(aa);if(ak.innerHTML.indexOf("(")===-1){ab=parseFloat(ak.innerHTML)}else{var al=ak.innerHTML.indexOf("(");am=ak.innerHTML.substring(al,al+1);var Q=ak.innerHTML.indexOf(")");R=ak.innerHTML.substring(Q,Q+1);ab=ak.innerHTML.substring(al+1,Q-1);ab=parseFloat(ab)}switch(S.toLowerCase()){case"changeper":if(Z===0){return false}ab=(P-Z)/Z;N=ab!==null&&ab<0?"red":"green";ac=W.format(ab);break;default:break}ak.innerText=am+ac+R}else{if(ag!==null){M=E.prototype.isPositiveChange.call(this,ab,ag,W);switch(M){case h.positive:N="green";break;case h.negative:N="red";break;default:return false}}if(!!P===false){return false}ak.innerText=W.format(P)}this.colorizeBorders(ak,N);this.colorizeChangeValueBackground(ak,N);if(X){this.colorizeChangeValue(ak,ab)}}}af=this.div;return af};F.prototype.colorizeBorders=function(I,G){var H=$(I).closest("li");H.removeClass("red").removeClass("green");H.addClass(G)};F.prototype.colorizeChangeValueBackground=function(I,H){var G=$(I).closest("li").find("div[data-field='changeper']");G.addClass("bg"+H);setTimeout(function(){G.removeClass("bg"+H)},1000)};F.prototype.colorizeChangeValue=function(G,H){$(G).removeClass("red").removeClass("green");if(H>0){$(G).addClass("green")}else{if(H==0){$(G).addClass("black")}else{$(G).addClass("red")}}};return F}(e));d.BoerseOnlineHeaderMarketBox=g;var j=(function(E){__extends(F,E);function F(){return E!==null&&E.apply(this,arguments)||this}F.getInstance=function(){if(this.pushTableInstance===null||typeof(this.pushTableInstance)==="undefined"){this.pushTableInstance=new F()}return this.pushTableInstance};F.prototype.applyAnimation=function(R){var S=[];for(var G=1;G<arguments.length;G++){S[G-1]=arguments[G]}this.div=R;var P=S[0].length>0?S[0][0]:null;var L=!!this.div?this.div.getAttribute("data-field"):null;var T=!!this.div?this.div.getAttribute("chartiq-name"):null;var H=L.concat(C);var Q=S[0].length>2?S[0][2]:null;var M=Q!==null?Q.formatters:null;var O=E.prototype.getRightFormatter.call(this,H,M);if(O==null){var N=Q.settings.formatterSettings||null;O=o.createFormatter(H,N)}if(!!L!==false){var K=E.prototype.getPushedValue.call(this,P,L);var J=P!==null?E.prototype.getPushedValue.call(this,P,H):null;var V=new Date();var I=V.isDstObserved()?O.options.utcToApplicationOffset+1:O.options.utcToApplicationOffset;if(I!==0&&!!window.utcTimeOffsetToApplication){I=parseFloat(window.utcTimeOffsetToApplication)}var U=new Date(J);U.setHours(U.getHours()+O.currentTimeZoneOffsetInHours+I);if(T){window[T].updateChartData({Last:K,DT:U},null,{fillGaps:true})}else{window.stxx.updateChartData({Last:K,DT:U},null,{fillGaps:true})}}R=this.div;return R};return F}(e));d.ChartIqTable=j;var D=(function(E){__extends(F,E);function F(){return E!==null&&E.apply(this,arguments)||this}F.getInstance=function(){if(this.pushTableInstance===null||typeof(this.pushTableInstance)==="undefined"){this.pushTableInstance=new F()}return this.pushTableInstance};F.prototype.applyAnimation=function(S){var T=[];for(var G=1;G<arguments.length;G++){T[G-1]=arguments[G]}this.div=S;var Q=T[0].length>0?T[0][0]:null;var K=!!this.div?this.div.getAttribute("data-field"):null;var U=!!this.div?this.div.getAttribute("vue-name"):null;var H=K.concat(C);var R=T[0].length>2?T[0][2]:null;var L=R!==null?R.formatters:null;var P;var O=!!this.div?+this.div.getAttribute("data-jsvalue"):null;var N=E.prototype.getRightFormatter.call(this,H,L);if(N==null){var M=R.settings.formatterSettings||null;N=o.createFormatter(H,M)}if(!!K!==false){var J=E.prototype.getPushedValue.call(this,Q,K);var I=Q!==null?E.prototype.getPushedValue.call(this,Q,H):null;switch(K.toLowerCase()){case"changeper":J=(J-O)/O;break;case"changeabs":J=J-O;break;default:break}window[U].push(J)}S=this.div;return S};return F}(e));d.VueTable=D;var B=(function(E){__extends(F,E);function F(){return E!==null&&E.apply(this,arguments)||this}F.getInstance=function(){if(this.snapshotHeadline===null||typeof(this.snapshotHeadline)==="undefined"){this.snapshotHeadline=new F()}return this.snapshotHeadline};F.prototype.applyAnimation=function(Z){var K=[];for(var I=1;I<arguments.length;I++){K[I-1]=arguments[I]}this.div=Z;var X=K[0].length>0?K[0][0]:null;var ab=K[0].length>1?K[0][1]:null;var Y=K[0].length>2?K[0][2]:null;var ad=Y!==null?Y.roomSettings:null;this.settings=ad;var J=Y.settings.animationSettings||null;var T=Y.settings.formatterSettings||null;var ac=Y.settings.pageSettings||null;var S=Y!==null?Y.formatters:null;var U=null;var R=!!this.div!==false?this.div.getAttribute("data-field"):null;var M="";var O,N;var W,aa,V;if(!!R!==false){U=E.prototype.getRightFormatter.call(this,R,S);var ah=!!this.div!==false&&!!this.div.dataset.format!==false?this.div.dataset.format:null;if(!!ah!==false&&typeof(ah)!=="undefined"){E.prototype.setUserFormatSettings.call(this,ah,U)}else{U=o.createFormatter(R,T)}O=E.prototype.getPushedValue.call(this,X,R);if(!!O===false){return false}if(this.isTimeFieldObserver(R)){var L=R.substr(0,R.length-C.length);W=X!==null?E.prototype.getPushedValue.call(this,X,L):null;aa=ab!==null?E.prototype.getPushedValue.call(this,ab,L):null}else{W=X!==null?E.prototype.getPushedValue.call(this,X,R):null;aa=ab!==null?E.prototype.getPushedValue.call(this,ab,R):null}M=aa!==null&&aa>W?J.negativeChangeColor:J.positiveChangeColor;this.pushValueSpans=Z.getElementsByClassName(J.pushValueSpanClass);if(!!U!==false){if(this.pushValueSpans!==null&&this.pushValueSpans.length>0){this.pushValueSpans[0].innerText=U.format(O);this.pushValueSpans[0]=E.prototype.setColor.call(this,J.animationType,M,this.pushValueSpans[0],J,E.prototype.resetColor)}else{if(!!Z.firstChild!==false){Z.firstChild.nodeValue=U.format(O)}else{Z.innerText=U.format(O);Z=E.prototype.setColor.call(this,J.animationType,M,Z,J,E.prototype.resetColor)}}}}else{this.pushValueSpans=Z.getElementsByTagName("div");if(!!this.pushValueSpans===false||this.pushValueSpans.length<1){return false}this.indicatorDivs=(ac.Constants.Jquery in window)?$("div[class^='bar-change-border'"):document.getElementsByClassName("bar-change-border");for(var G=0,H=this.pushValueSpans;G<H.length;G++){var ae=H[G];R=ae.dataset.field;if(!!R!==false){var ag="";var Q="";U=E.prototype.getRightFormatter.call(this,R,S);var ah=!!ae!==false&&!!ae.dataset.format!==false?ae.dataset.format:null;if(ah!==null){E.prototype.setUserFormatSettings.call(this,ah,U)}else{U=o.createFormatter(R,T)}V=ae.dataset.jsvalue;if(!!V===false){continue}V=parseFloat(ae.dataset.jsvalue);if(ae.innerHTML.indexOf("(")===-1){W=parseFloat(ae.innerHTML)}else{var af=ae.innerHTML.indexOf("(");ag=ae.innerHTML.substring(af,af+1);var P=ae.innerHTML.indexOf(")");Q=ae.innerHTML.substring(P,P+1);W=ae.innerHTML.substring(af+1,P-1);W=parseFloat(ae.innerHTML)}O=E.prototype.getPushedValue.call(this,X,"Mid");if(!!O!==false){switch(R.toLowerCase()){case"changeper":W=(O-V)/V;M=W!==null&&W<0?J.negativeChangeColor:J.positiveChangeColor;W=U.format(W);break;case"changeabs":W=O-V;M=W!==null&&W<0?J.negativeChangeColor:J.positiveChangeColor;if(J!==null){N=!!W!==false&&W<0?J.indicatorDivClass+" "+J.negChangeIndicator:J.indicatorDivClass+" "+J.posChangeIndicator}W=U.format(W);if(this.indicatorDivs!==null&&this.indicatorDivs.length>0){this.indicatorDivs[0].className=N}break;default:break}ae.innerText=ag+W+Q;ae=E.prototype.setColor.call(this,J.animationType,M,ae,J,E.prototype.resetColor)}}}}Z=this.div;return Z};F.snapshotHeadline=null;return F}(e));d.SnapshotHeadlineNew=B;var k=(function(){function E(F){this.strategy=F}E.prototype.executeAnimation=function(I){var H=[];for(var F=1;F<arguments.length;F++){H[F-1]=arguments[F]}var G=this.strategy.applyAnimation(I,H);return G};return E}());d.Context=k})(a=b.AnimationManager||(b.AnimationManager={}))})(MDSnG||(MDSnG={}));var MDSnG;(function(a){var b;(function(s){var t=a.Formatter.NumberFormatter;var l=a.Formatter.DateFormatter;var d=a.AnimationManager.Context;var e=a.AnimationManager.AnimationContextType;var x=a.AnimationManager.PushTable;var F=a.AnimationManager.ScrollPushTable;var q=a.AnimationManager.HighChartsPushTable;var G=a.AnimationManager.SnapshotHeadline;var f=a.AnimationManager.AnimationType;var i=a.AnimationManager.ChangeDirection;var o=a.AnimationManager.FormatterTypes;var g=a.AnimationManager.BoerseOnlineHeaderMarketBox;var j=a.AnimationManager.ChartIqTable;var J=a.AnimationManager.VueTable;var r;(function(K){K[K.ISIN=0]="ISIN";K[K.Valor=1]="Valor";K[K.OrderbookId=2]="OrderbookId"})(r=s.IdentifierTypes||(s.IdentifierTypes={}));var I;(function(K){K[K.ASK=0]="ASK";K[K.BID=1]="BID";K[K.ALL=2]="ALL";K[K.MID=3]="MID";K[K.CUSTOM=4]="CUSTOM"})(I=s.Templates||(s.Templates={}));var n;(function(K){K[K.roomID=0]="roomID";K[K.Ask=1]="Ask";K[K.AskSize=2]="AskSize";K[K.AskTimestamp=3]="AskTimestamp";K[K.Bid=4]="Bid";K[K.BidSize=5]="BidSize";K[K.BidTimestamp=6]="BidTimestamp";K[K.Timestamp=7]="Timestamp";K[K.Quotime=8]="Quotime";K[K.CurrencyRate=9]="CurrencyRate";K[K.CurrencyRateDate=10]="CurrencyRateDate";K[K.float1=11]="float1";K[K.float2=12]="float2";K[K.long1=13]="long1";K[K.long2=14]="long2";K[K.Mid=15]="Mid";K[K.MidSize=16]="MidSize";K[K.MidTimestamp=17]="MidTimestamp";K[K.ChangePer=18]="ChangePer";K[K.ChangeAbs=19]="ChangeAbs";K[K.Spread=20]="Spread";K[K.Trend=21]="Trend";K[K.Last=22]="Last";K[K.LastSize=23]="LastSize";K[K.LastTimestamp=24]="LastTimestamp"})(n=s.Fields||(s.Fields={}));var H;(function(K){K[K.json=0]="json";K[K.protocolbuffers=1]="protocolbuffers"})(H=s.Streams||(s.Streams={}));var c;(function(K){K[K.join=0]="join";K[K.leave=1]="leave"})(c=s.Action||(s.Action={}));var A;(function(K){K[K.room=0]="room";K[K.field=1]="field";K[K.table=2]="table";K[K.source=3]="source";K[K.item=4]="item"})(A=s.RoomHtmlTagAttributes||(s.RoomHtmlTagAttributes={}));var y="#d41414";var p="#279627";var k=(function(){function K(M,L,N){if(N===void 0){N=H[H.protocolbuffers]}this.serverUri=M;this.serverPort=L;this.stream=N}return K}());s.ConnectionOptions=k;var m=(function(){function K(){}return K}());s.Expression=m;var w=(function(){function K(){}return K}());s.PushRequestItempOptions=w;var u=(function(){function K(N,L,M){if(M===void 0){M=I.ALL}this.expressions=[];this.simulate=false;if(!!N!==false){this.type=N}if(!!L!==false){this.id=L}this.template=I[M]}K.prototype.isValidPaylod=function(){throw new Error("Not implemented")};K.prototype.getExchangeIdFrompushId=function(){var M=NaN;if(!!this.pushId!==false){var N=this.pushId.substring(5,8);var L=parseInt(N,16);M=L}return M};return K}());s.Payload=u;var v=(function(){function K(L){this.action=L.action;this.payload=L.payload}return K}());s.PushRequestItem=v;var h=(function(){function K(){this.changeDirection=i[i.none]}return K}());var C=(function(){function K(L){this.domIdentifier=L;this.setPropertyFields()}K.prototype.setPropertyFields=function(){var L=this.domIdentifier.split("-");this.searchIdType=L.length>0?L[0]:"";this.searchId=L.length>1?L[1]:"";this.providerCode=L.length>2?L[2]:"";this.exchangeCode=L.length>3?L[3]:"";this.currencyCode=L.length>4?L[4]:""};K.prototype.getSearchIdType=function(){return this.searchIdType};K.prototype.getSearchId=function(){return this.searchId};K.prototype.getExchange=function(){return this.exchangeCode};K.prototype.getCurrency=function(){return this.currencyCode};return K}());s.RoomObserverDomIdentifier=C;var D=(function(){function K(){}return K}());s.RoomObserverSettings=D;var B=(function(){function K(L,M){this.visible=true;this.changeDirection=i[i.none];this.currentColor=i[i.none];this.formatters=[];this.animationContextType=e[a.AnimationManager.AnimationContextType.PushTable];this.animationContext=null;this.settings=new D();this.domElements=[];this.id=L;this.roomSettings=M}K.prototype.setAnimationContext=function(L){switch(L.toLocaleLowerCase()){case"pushtable":case"1":this.animationContextType=e[a.AnimationManager.AnimationContextType.PushTable];break;case"scrolltable":case"2":this.animationContextType=e[a.AnimationManager.AnimationContextType.ScrollPushTable];break;case"highstockchart":case"3":this.animationContextType=e[a.AnimationManager.AnimationContextType.HighChartsPushTable];break;case"snapshotHeadline":case"4":this.animationContextType=e[a.AnimationManager.AnimationContextType.SnapshotHeadline];break;case"boerseonlineheadermarketbox":case"5":this.animationContextType=e[a.AnimationManager.AnimationContextType.BoerseOnlineHeaderMarketBox];break;case"chartiqtable":case"6":this.animationContextType=e[a.AnimationManager.AnimationContextType.ChartIqTable];break;case"vuetable":case"7":this.animationContextType=e[a.AnimationManager.AnimationContextType.VueTable];break;default:this.animationContextType=e[a.AnimationManager.AnimationContextType.PushTable]}this.animationContext=this.getAnimationContext()};K.prototype.getAnimationContextByContexteType=function(L){if(!!L===false){return null}switch(L.toLocaleLowerCase()){case"pushtable":case"1":return new d(x.getInstance());case"scrolltable":case"2":return new d(F.getInstance());case"highstockchart":case"3":return new d(q.getInstance());case"snapshotHeadline":case"4":return new d(G.getInstance());case"boerseonlineheadermarketbox":case"5":return new d(g.getInstance());case"chartiqtable":case"6":return new d(j.getInstance());case"vuetable":case"7":return new d(J.getInstance());default:return null}};K.prototype.getAnimationContext=function(){switch(this.animationContextType){case e[e.PushTable]:return new d(x.getInstance());case e[e.ScrollPushTable]:return new d(F.getInstance());case e[e.HighChartsPushTable]:return new d(q.getInstance());case e[e.SnapshotHeadline]:return new d(G.getInstance());case e[e.BoerseOnlineHeaderMarketBox]:return new d(g.getInstance());case e[e.ChartIqTable]:return new d(j.getInstance());case e[e.VueTable]:return new d(J.getInstance());default:return new d(new x())}};K.prototype.mockDoUpdate=function(M,O,N){if(!!M!==false&&!!N!==false){var P=M.getAttribute("data-table");if(this.animationContext===null){this.animationContext=this.getAnimationContextByContexteType(P)}if(!!this.animationContext!==false){var L=this.animationContext.executeAnimation(M,N,O,this);return L}}return null};K.prototype.doUpdate=function(L,N,M){if(!!L!==false&&!!M!==false){var O=L.getAttribute("data-table");if(this.animationContext===null){this.animationContext=this.getAnimationContextByContexteType(O)}if(!!this.animationContext!==false){this.animationContext.executeAnimation(L,M,N,this)}}};K.prototype.mockObserverUpdate=function(P){this.oldValue=this.newValue;this.newValue=P;var Q=[];for(var M=0,L=this.domElements;M<L.length;M++){var O=L[M];if(x.getInstance().isTimeFieldObserver(O.getAttribute("data-field"))){continue}var N=this.mockDoUpdate(O,this.oldValue,this.newValue);Q[O.getAttribute("data-field").toLocaleLowerCase()]=N}return Q};K.prototype.update=function(O){this.oldValue=this.newValue;this.newValue=O;for(var M=0,L=this.domElements;M<L.length;M++){var N=L[M];this.doUpdate(N,this.oldValue,this.newValue)}};K.prototype.isFormatterSetted=function(O){var P=false;for(var M=0,L=this.formatters;M<L.length;M++){var N=L[M];if(O===N[0]){P=true;break}}return P};K.prototype.setRoomElementFormatter=function(L){if(!!L!==false){switch(L.toLocaleLowerCase()){case n[n.Ask].toLocaleLowerCase():case n[n.AskSize].toLocaleLowerCase():case n[n.Bid].toLocaleLowerCase():case n[n.BidSize].toLocaleLowerCase():case n[n.float1].toLocaleLowerCase():case n[n.float2].toLocaleLowerCase():case n[n.Mid].toLocaleLowerCase():case n[n.ChangeAbs].toLocaleLowerCase():case n[n.Last].toLocaleLowerCase():case n[n.LastSize].toLocaleLowerCase():if(this.isFormatterSetted(o[o.Number])===false){this.formatters.push([o[o.Number],new t(this.roomSettings.locale,this.settings.formatterSettings.NumberFormatter)])}break;case n[n.ChangePer].toLocaleLowerCase():case n[n.Spread].toLocaleLowerCase():if(this.isFormatterSetted(o[o.Percent])===false){this.formatters.push([o[o.Percent],new t(this.roomSettings.locale,this.settings.formatterSettings.PercentFormatter)])}break;case n[n.AskTimestamp].toLocaleLowerCase():case n[n.BidTimestamp].toLocaleLowerCase():case n[n.MidTimestamp].toLocaleLowerCase():case n[n.LastTimestamp].toLocaleLowerCase():if(this.isFormatterSetted(o[o.Time])===false){this.formatters.push([o[o.Time],new l(this.roomSettings.locale,this.settings.formatterSettings.DateTimeFormatter)])}break;default:break}}};K.prototype.setFormatter=function(){for(var N=0,L=this.domElements;N<L.length;N++){var R=L[N];var aa=R.getAttribute("data-table");if(!!aa!==false){switch(aa){case e.PushTable.toString():case e.BoerseOnlineHeaderMarketBox.toString():var T=R.getAttribute("data-"+A[A.field]);if(!!T!==false){this.setRoomElementFormatter(T)}break;case e.SnapshotHeadline.toString():var Y=R.getAttribute("data-"+A[A.field]);if(!!Y!==false){this.setRoomElementFormatter(Y)}else{var W=R.getElementsByTagName("span");if(!!W===false||W.length<1){break}for(var M=0,X=W;M<X.length;M++){var Z=X[M];Y=Z.dataset.field;if(!!Y!==false){this.setRoomElementFormatter(Y)}}}break;case e.ScrollPushTable.toString():if("children" in R){var S=R.children;if(!!S!==false&&S.length>0){for(var V=0;V<S.length;V++){var P=S[V];var Q=void 0;if(!!P.getAttribute("data-"+A[A.field])===false&&P.nodeName==="TD"){Q=P.getElementsByTagName("div");if(!!Q!==false&&Q.length>0){var U=Q[0].getAttribute("data-"+A[A.field]);if(!!U!==false){this.setRoomElementFormatter(U)}}}}}}break;case e.HighChartsPushTable.toString():var O=R.getAttribute("data-"+A[A.field]);if(!!O!==false){this.setRoomElementFormatter(O)}this.formatters.push([o[o.Time],new l(this.roomSettings.locale)]);break;default:break}}}};K.prototype.setRoomElements=function(L){this.domElements=L};return K}());s.RoomObserver=B;var E=(function(){function K(){this.positiveChangeColor=p;this.negativeChangeColor=y;this.animationType=f[f.background]}K.prototype.setAnimationType=function(L){this.animationType=L};K.prototype.getAnimationType=function(){return this.animationType};return K}());s.RoomSettings=E;var z=(function(){function K(M,L){this.roomSettings=M||null;this.pushItem=L||null;this.observers=[];if(!!this.pushItem!==false&&!!this.roomSettings!==false){this.id=this.pushItem.payload.room;this.newValue=this.newValue}}K.prototype.mockRoomUpdate=function(L){this.oldValue=this.newValue;this.newValue=L;var M=this.mockNotifyObservers(this.newValue);return M};K.prototype.update=function(L){this.oldValue=this.newValue;this.newValue=L;this.notifyObservers(this.newValue)};K.prototype.addRoomObserver=function(L){if(!!L!==false){this.observers.push(L)}};K.prototype.removeRoomObser=function(L){this.observers.splice(this.observers.indexOf(L),1)};K.prototype.notifyObservers=function(L){this.observers.forEach(function(M){M.update(L)})};K.prototype.mockNotifyObservers=function(M){var L=[];this.observers.forEach(function(N){var O=N.mockObserverUpdate(M);L[M.Room]=O});return L};K.prototype.getObsevers=function(){return this.observers};return K}());s.Room=z})(b=a.Model||(a.Model={}))})(MDSnG||(MDSnG={}));var MDSnG;(function(a){var b;(function(A){var c=a.AnimationManager.AnimationContextType;var k=a.Model.Fields;var f=a.Formatter.DateFormatter;var x=a.Model.RoomObserver;var d=a.ConfigurationManager.ConfigManager;var t=a.Formatter.NumberFormatter;var u="#d41414";var p="#279627";var w="R";var h=location.hostname;var g=false;var r="Content/Scripts/MDSnG/libs/";var v=false;var j=600;var m=500;var l="#F7F6C2";var q="$";var n=(function(){function B(){}B.createFormatter=function(C,F){var D;var E=d.getConfigurationObject("FormatterSettings");if(!!C!==false){switch(C.toLocaleLowerCase()){case k[k.Ask].toLocaleLowerCase():case k[k.AskSize].toLocaleLowerCase():case k[k.Bid].toLocaleLowerCase():case k[k.BidSize].toLocaleLowerCase():case k[k.float1].toLocaleLowerCase():case k[k.float2].toLocaleLowerCase():case k[k.Mid].toLocaleLowerCase():case k[k.ChangeAbs].toLocaleLowerCase():D=new t(E.NumberFormatter.localeMatcher,E.NumberFormatter);break;case k[k.ChangePer].toLocaleLowerCase():D=new t(E.PercentFormatter.localeMatcher,E.PercentFormatter);break;case k[k.AskTimestamp].toLocaleLowerCase():case k[k.BidTimestamp].toLocaleLowerCase():D=new f(E.DateTimeFormatter.localeMatcher,E.DateTimeFormatter);break;default:D=null;break}}return D};B.userFormatterSettings=d.getConfigurationObject("FormatterSettings");return B}());A.FormatterFactory=n;var y=(function(){function B(){}B.createObserver=function(E,F,C,G){if(!!C===false){return null}var D=null;D=new x(E,F);D.setAnimationContext(C);switch(C){case c.ScrollPushTable.toString():D.settings=G;break;case c.HighChartsPushTable.toString():D.visible=false;D.settings=G;break;case c.SnapshotHeadline.toString():D.settings=G;break;case c.PushTable.toString():default:D.settings=G;break}return D};return B}());A.RoomObserverFactory=y;var s=(function(){function B(){}B.getParameterByName=function(C,F){if(!F){F=window.location.href}C=C.replace(/[\[\]]/g,"\\$&");var D=new RegExp("[?&]"+C+"(=([^&#]*)|&|#|$)"),E=D.exec(F);if(!E){return null}if(!E[2]){return""}return decodeURIComponent(E[2].replace(/\+/g," "))};B.getRoomIds=function(F){var E=[];if(!!F){var G=F.split(",");for(var C=0,H=G;C<H.length;C++){var D=H[C];if(D.toLowerCase().indexOf("r")===0){E.push(D)}}}return E};B.enableLogByBypass=function(){var D=false;var C=B.getParameterByName("bypass");var E=B.getParameterByName("roomids");if(!!C&&C.toLocaleLowerCase()===B.userPageSettings.byPass.toLocaleLowerCase()){D=true}if(!!E){B.registeredRooms=B.getRoomIds(E)}return D};B.log=function(E,D){if(D===void 0){D=false}var C=B.enableLogByBypass()||false;B.isByPassAuthorization=C;if(D||this.enableDebugger||C){if(typeof(window.console)!=="undefined"){var F=E;switch(typeof(E)){case"string":window.console.log(F);break;case"object":window.console.log("%O",F);break;default:window.console.log(F)}}}};B.userPageSettings=d.getConfigurationObject("PageSettings");B.enableDebugger=B.userPageSettings.debuggerAlerts||false;B.registeredRooms=[];B.isByPassAuthorization=false;return B}());A.Logger=s;var o=(function(){function B(){}B.buildGuid=function(){var C=function(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)};return C()+C()+"-"+C()+"-"+C()+"-"+C()+"-"+C()+C()+C()};B.generateDefaultRoomSettings=function(){var C={negativeChangeColor:u,positiveChangeColor:p,animationType:"background",locale:"de-DE"};return C};B.generateDefaultPageSettings=function(){var C={domain:h,debuggerAlerts:g,remoteAlerts:v,fadeTime:j,flashTime:m,librairiesPath:r,locale:"de-DE",flashColor:l,roomSettings:this.generateDefaultRoomSettings(),onServerError:function(){}};return C};B.generateDefaultNumberFormatterOptions=function(){return{localeMatcher:"en-US",options:{style:"decimal",precision:2,useGrouping:true}}};B.generateDefaultDateFormatterOptions=function(){return{useTwelveHourFormat:false,displayDate:false,dateFormat:"dd.MM.yyyy",utcToApplicationOffset:0}};return B}());A.Generator=o;var i=(function(){function B(){this.collectedRoomDivs=[];this.collectedDomElements=[]}B.prototype.setClientConfig=function(C){this.clientConfigurationObject=C};B.prototype.getRoomHtmlElemByRoomId=function(C){return document.getElementById(C)};B.prototype.getRoomDivsByRoomId=function(G){var E=[];if(!!G===false){s.log("request item not found")}for(var D=0,C=this.collectedRoomDivs;D<C.length;D++){var F=C[D];var H=$(F).attr("data-room");if(H===G){E.push(F)}}return E};B.prototype.getRoomElementsByRoomId=function(H){var F=[];if(!!H===false){s.log("request item not found")}for(var D=0,C=this.collectedDomElements;D<C.length;D++){var G=C[D];var E=G.getAttribute("data-room");if(E===H){F.push(G)}}return F};B.prototype.getRoomElementsByRoomIdAndAnimationType=function(J,E){var H=[];if(!!J===false){s.log("request item not found")}for(var D=0,C=this.collectedDomElements;D<C.length;D++){var I=C[D];var F=I.getAttribute("data-room");var G=I.getAttribute("data-table");if(F===J&&G===E){H.push(I)}}return H};B.prototype.collectRoomRequestDivs=function(){var C=[];if(q&&q in window){$("div[data-room*='R']").each(function(){C.push(this)})}this.collectedRoomDivs=C;return this.collectedRoomDivs};B.prototype.collectRoomElements=function(){var C=[];if(q&&q in window){$("div[data-table='"+c.HighChartsPushTable+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)});$("div[data-table='"+c.PushTable+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)});$("tr[data-table='"+c.ScrollPushTable+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)});$("div[data-table='"+c.SnapshotHeadline+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)});$("div[data-table='"+c.BoerseOnlineHeaderMarketBox+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)});$("div[data-table='"+c.ChartIqTable+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)});$("div[data-table='"+c.VueTable+"'][data-source='mdsng'][data-room^='R']").each(function(D,E){C.push(E)})}this.collectedDomElements=C;return this.collectedDomElements};B.prototype.getRoomDivAttributeValue=function(D,C){if(!!D===false||!!C===false){return null}return $(D).attr(C.toLowerCase())};B.prototype.getRoomElementAttributeValue=function(D,C){if(!!D===false){return null}return D.getAttribute(C.toLowerCase())};return B}());A.DomWatcher=i;var e=(function(){function B(){}B.builTemplate=function(){var E=[];for(var D=0;D<arguments.length;D++){E[D]=arguments[D]}var G="";for(var C=0,F=E;C<F.length;C++){var H=F[C];G+="${"+a.Model.Fields[H]+"}"}return G};return B}());A.CustomTemplateBuilder=e;var z=(function(){function B(){}B.getConfigurationObject=function(D,C){var E=null;if(typeof(D)!=="undefined"&&D!==null&&C in D){E=JSON.parse(JSON.stringify(D[C]))}return E};return B}());A.UserConfigManager=z})(b=a.Utilities||(a.Utilities={}))})(MDSnG||(MDSnG={}));var MDSnG;(function(MDSnG){var ConnectionManager;(function(ConnectionManager_1){var Generator=MDSnG.Utilities.Generator;var Logger=MDSnG.Utilities.Logger;var ioConnectProtocolString="//";var JQUERY_NAMESPACE="$";var SOCKETIO_NAMESPACE="io";var ConnectionManager=(function(){function ConnectionManager(options,clientConfigObj){this.socket=null;this.configObject=null;this.connectionOption=options;if(!!clientConfigObj!==false){this.configObject=clientConfigObj}}ConnectionManager.prototype.mockConnect=function(){if(!!this.roomManager===false){this.roomManager=new MDSnG.RoomManager.RoomManager(this);Logger.log("connected successfully for testing ....");this.roomManager.registerRooms();Logger.log(this.roomManager)}};ConnectionManager.prototype.connect=function(){var _this=this;var socketIoNamespace=this.configObject!==null?this.configObject.PageSettings.Constants.SocketIo:SOCKETIO_NAMESPACE;var mdsngStarter=document.getElementById("mdsng_starter");if(!!mdsngStarter&&!!mdsngStarter.dataset.disable){this.configObject.PageSettings.disablePush=JSON.parse(mdsngStarter.dataset.disable)}if(!!socketIoNamespace!==false&&socketIoNamespace in window&&(typeof(this.configObject.PageSettings.disablePush)==="undefined"||this.configObject.PageSettings.disablePush===false)){this.roomManager=new MDSnG.RoomManager.RoomManager(this);if(!!this.socket===false||!!this.socket.connected===false||(!!this.socket&&this.socket.connected===false)){this.socket=eval(socketIoNamespace);if(!!this.connectionOption.sessionGuid===false){this.connectionOption.sessionGuid=Generator.buildGuid()}var ioConnectUrl=ioConnectProtocolString+this.connectionOption.serverUri+((this.connectionOption.serverPort)?":"+this.connectionOption.serverPort:"");this.socket=io.connect(ioConnectUrl,{query:"stream="+this.connectionOption.stream+"&token="+this.getMD5(),forceNew:true});this.socket.on("connect",function(){Logger.log("socket connected successfull ....");_this.roomManager.registerRooms();for(var _i=0,_a=_this.roomManager.activeRequestMessages;_i<_a.length;_i++){var requestMessage=_a[_i];_this.sendRoomRequestObject(requestMessage)}});this.socket.on("q",function(message){_this.roomManager.onRoomUpdate(message,true)})}else{if(this.socket.connected===true){this.roomManager.registerRooms();for(var _i=0,_a=this.roomManager.activeRequestMessages;_i<_a.length;_i++){var requestMessage=_a[_i];this.sendRoomRequestObject(requestMessage)}}else{Logger.log("connecting the socket agin and registering the items....");if(!!this.connectionOption.sessionGuid===false){this.connectionOption.sessionGuid=Generator.buildGuid()}var ioConnectUrl=ioConnectProtocolString+this.connectionOption.serverUri+((this.connectionOption.serverPort)?":"+this.connectionOption.serverPort:"");this.socket=io.connect(ioConnectUrl,{query:"stream="+this.connectionOption.stream+"&token="+this.getMD5(),forceNew:true});this.roomManager.registerRooms();for(var _b=0,_c=this.roomManager.activeRequestMessages;_b<_c.length;_b++){var requestMessage=_c[_b];this.sendRoomRequestObject(requestMessage)}}}}};ConnectionManager.prototype.disconnect=function(socketObject){if(!!socketObject===false){this.leaveAll();this.socket.disconnect();return}if("disconnect" in socketObject){socketObject.disconnect()}};ConnectionManager.prototype.leaveAll=function(){if(!!this.socket){var jsonObject={action:"leaveAll"};this.socket.emit("leaveAll",jsonObject)}};ConnectionManager.prototype.reconnect=function(){this.leaveAll();this.connect()};ConnectionManager.prototype.getConnectionSocket=function(){return this.socket};ConnectionManager.prototype.addInstrument=function(requestItem){if(!!requestItem!==false){this.sendRoomRequestObject(requestItem)}};ConnectionManager.prototype.sendRoomRequestObject=function(requestItem){if(this.isSocketConnected()){this.socket.emit("join",requestItem)}};ConnectionManager.prototype.isSocketConnected=function(){return this.socket.connected};ConnectionManager.prototype.sentResetRequest=function(){this.socket.emit("reset",{action:"reset"})};ConnectionManager.prototype.getDateFromResponseHeaders=function(){var req=new XMLHttpRequest();req.open("GET",document.location,false);req.send(null);return req.getResponseHeader("date")};ConnectionManager.prototype.getMD5=function(){var year=new Date().getUTCFullYear();var month=new Date().getUTCMonth().toString().length>1||new Date().getUTCMonth()===9?parseInt((new Date().getUTCMonth()+1).toString()):"0"+parseInt((new Date().getUTCMonth()+1).toString());var date=new Date().getUTCDate().toString().length>1?parseInt(new Date().getUTCDate().toString()):"0"+parseInt(new Date().getUTCDate().toString());var hour=new Date().getUTCHours().toString().length>1?parseInt(new Date().getUTCHours().toString()):"0"+parseInt(new Date().getUTCHours().toString());var currentDataTime=""+year+month+date+hour;return md5("fInAnzEn_"+currentDataTime)};return ConnectionManager}());ConnectionManager_1.ConnectionManager=ConnectionManager})(ConnectionManager=MDSnG.ConnectionManager||(MDSnG.ConnectionManager={}))})(MDSnG||(MDSnG={}));var MDSnG;(function(MDSnG){var RoomManager;(function(RoomManager_1){var Logger=MDSnG.Utilities.Logger;var UserConfigManager=MDSnG.ConfigurationManager.ConfigManager;var Room=MDSnG.Model.Room;var RoomObserverSettings=MDSnG.Model.RoomObserverSettings;var RoomSettings=MDSnG.Model.RoomSettings;var Fields=MDSnG.Model.Fields;var Generator=MDSnG.Utilities.Generator;var DomWatcher=MDSnG.Utilities.DomWatcher;var RoomObserverDomIdentifier=MDSnG.Model.RoomObserverDomIdentifier;var AnimationType=MDSnG.AnimationManager.AnimationType;var Templates=MDSnG.Model.Templates;var Payload=MDSnG.Model.Payload;var Expression=MDSnG.Model.Expression;var PROTOBUF_NAMESPACE="dcodeIO";var RoomManager=(function(){function RoomManager(connectionManager){this.roomSettings=new RoomSettings();this.activeRooms=[];this.activeRequestMessages=[];if("configObject" in connectionManager){this.clientConfigurationObject=UserConfigManager.getConfiguration()}this.pageSettings=UserConfigManager.getConfigurationObject("PageSettings");if(this.pageSettings===null){this.pageSettings=Generator.generateDefaultPageSettings()}this.roomSettings.locale=this.pageSettings.locale;this.roomSettings.animationType=typeof(this.pageSettings.animationType)!=="undefined"&&this.pageSettings.animationType!==null?this.pageSettings.animationType:AnimationType[AnimationType.background];this.domWatcher=new DomWatcher();this.domWatcher.setClientConfig(this.clientConfigurationObject);this.connectionManager=connectionManager;var decodeIoNamespace=typeof(this.domWatcher.clientConfigurationObject.PageSettings)!=="undefined"?this.domWatcher.clientConfigurationObject.PageSettings.Constants.ProtoBuffer:PROTOBUF_NAMESPACE;if(!!decodeIoNamespace!==false&&decodeIoNamespace in window){dcodeIO=eval(dcodeIO);this.protoBuffer=dcodeIO.ProtoBuf;this.protoMessage=this.protoBuffer.loadProtoFile({root:this.pageSettings.librairiesPath,file:"rtPush.txt"}).build("RtPush")}}RoomManager.prototype.setClientConfig=function(configObject){this.clientConfigurationObject=configObject};RoomManager.prototype.mockOnRoomUpdate=function(jsonResultItem){var updatedObject=null;if(!!jsonResultItem){updatedObject=this.getRoomItemByRoomId(jsonResultItem.Room).mockRoomUpdate(jsonResultItem)}return updatedObject};RoomManager.prototype.onRoomUpdate=function(message,delay){var jsonResultItem=null;if(!!message){if(this.connectionManager.connectionOption.stream===MDSnG.Model.Streams[MDSnG.Model.Streams.protocolbuffers]){try{jsonResultItem=this.protoMessage.decode(message);if(!!this.getRoomItemByRoomId(jsonResultItem.Room)===false){this.roomItem=new Room(this.roomSettings,jsonResultItem);this.activeRooms.push(this.roomItem)}else{this.getRoomItemByRoomId(jsonResultItem.Room).update(jsonResultItem)}var randomnumber=Math.floor(Math.random()*3);if(randomnumber%2===1){if(Logger.isByPassAuthorization){if(Logger.registeredRooms.indexOf(jsonResultItem.Room)!==-1){var updateObj={};updateObj.RoomId=jsonResultItem.Room;updateObj.NewValue=jsonResultItem;Logger.log(updateObj)}else{if(Logger.registeredRooms.length===0){Logger.log(this)}}}else{Logger.log(this)}}}catch(e){}}}return jsonResultItem};RoomManager.prototype.createPushRequestItem=function(identifierType,id,currency,exchangeCode){var options=new MDSnG.Model.PushRequestItempOptions();options.action=MDSnG.Model.Action[MDSnG.Model.Action.join];var payload=new MDSnG.Model.Payload(identifierType,id);payload.currency=currency;payload.exchange=exchangeCode;payload.simulate=this.pageSettings.simulate;payload.room="test";options.payload=payload;return new MDSnG.Model.PushRequestItem(options)};RoomManager.prototype.getTemplateByTemplateAttribute=function(templateData){var template=null;switch(templateData.toLocaleLowerCase()){case Templates[Templates.ALL].toLocaleLowerCase():template=Templates.ALL;break;case Templates[Templates.ASK].toLocaleLowerCase():template=Templates.ASK;break;case Templates[Templates.BID].toLocaleLowerCase():template=Templates.BID;break;case Templates[Templates.MID].toLocaleLowerCase():template=Templates.MID;break;case Templates[Templates.CUSTOM].toLocaleLowerCase():template=Templates.CUSTOM;break;default:template=Templates.ALL;break}return template};RoomManager.prototype.createRequestMessageFromDomElement=function(roomElement,exchangeSwap){var options=new MDSnG.Model.PushRequestItempOptions();options.action=MDSnG.Model.Action[MDSnG.Model.Action.join];var roomId=roomElement.getAttribute("data-room");var field=roomElement.getAttribute("data-field");var exchangeMarketSwap=null;if(!!exchangeSwap){exchangeMarketSwap=this.getExchangeSwapByRoomId(exchangeSwap,roomId)}var payloadId=roomElement.getAttribute("data-item");var template=Templates.ALL;var templateData=null;var payload;if("dataset" in roomElement){if(!!roomElement.dataset["template"]!==false){templateData=roomElement.dataset["template"]}}if(!!templateData!==false){template=this.getTemplateByTemplateAttribute(templateData)}if(!!payloadId!==false){if(template===Templates.CUSTOM){}var payloadParts=[];if(payloadId.toLocaleLowerCase().indexOf("y")===0){payloadParts=payloadId.split("-");payload=new Payload();payload.exchangeSwap=exchangeMarketSwap;payload.pushId=payloadParts.length>0?payloadParts[0]:null;if(payloadParts.length>1){payload.currency=payloadParts[1]}}else{payloadParts=payloadId.split("-");var identifierType=payloadParts.length>0?payloadParts[0]:null;var identifier=payloadParts.length>1?payloadParts[1]:null;payload=new MDSnG.Model.Payload(identifierType,identifier,template);payload.provider=payloadParts.length>2?payloadParts[2]:null;payload.exchange=payloadParts.length>3?payloadParts[3]:null;payload.currency=payloadParts.length>4?payloadParts[4]:null;payload.exchangeSwap=exchangeMarketSwap}payload.simulate=this.pageSettings.simulate;payload.room=roomId;options.payload=payload;return new MDSnG.Model.PushRequestItem(options)}return null};RoomManager.prototype.getRoomItemByRoomId=function(roomId){var found=null;if(!!roomId===false){Logger.log("request item not found")}for(var _i=0,_a=this.activeRooms;_i<_a.length;_i++){var requestItem=_a[_i];if("id" in requestItem&&requestItem.id===roomId){found=requestItem;break}}return found};RoomManager.prototype.isObserverAlreadySetted=function(observerId,room,animationType){var result=false;if(room.getObsevers().length<1){return false}if(!!room!==false&&!!observerId!==false){for(var _i=0,_a=room.getObsevers();_i<_a.length;_i++){var observ=_a[_i];if("id" in observ&&observ.id.searchIdType===observerId.searchIdType&&MDSnG.AnimationManager.AnimationContextType[observ.animationContextType].toString()===animationType){result=true;break}}}return result};RoomManager.prototype.isRequestItemAlreadySetted=function(requestItem){for(var _i=0,_a=this.activeRequestMessages;_i<_a.length;_i++){var item=_a[_i];if(!!item){if(item.payload.pushId===requestItem.payload.pushId){return true}}}return false};RoomManager.prototype.getExchangeSwap=function(){var exchangeSwapDiv=document.getElementById("exchangeSwap");var exchageSwap=[];var room,days,start,exchangeId;if(!exchangeSwapDiv){return null}var spans=Array.prototype.slice.call(exchangeSwapDiv.getElementsByTagName("span"));for(var _i=0,spans_1=spans;_i<spans_1.length;_i++){var span=spans_1[_i];room=span.dataset.room;days=this.buildSwapDaysArray(span.dataset.days);start=span.dataset.from;exchangeId=span.dataset.exchange;if(room&&days&&start&&exchangeId){var swapItem={days:days,timeFrom:start,exchangeId:exchangeId,roomId:room};exchageSwap.push(swapItem)}}return exchageSwap};RoomManager.prototype.getExchangeSwapByRoomId=function(exchangeSwapItems,roomId){var exchangeSwap=[];if(!!roomId){for(var _i=0,exchangeSwapItems_1=exchangeSwapItems;_i<exchangeSwapItems_1.length;_i++){var exchangeSwapItem=exchangeSwapItems_1[_i];if(exchangeSwapItem.roomId===roomId){var item={};item.days=exchangeSwapItem.days;item.timeFrom=exchangeSwapItem.timeFrom;item.exchangeId=exchangeSwapItem.exchangeId;exchangeSwap.push(item)}}}return exchangeSwap};RoomManager.prototype.buildSwapDaysArray=function(daysString){var daysArray=[];var days=daysString.split(",");for(var _i=0,days_1=days;_i<days_1.length;_i++){var day=days_1[_i];daysArray.push(parseInt(day))}return daysArray};RoomManager.prototype.isChangeField=function(field){return field.toLocaleLowerCase()===Fields[Fields.ChangeAbs].toLocaleLowerCase()||field.toLocaleLowerCase()===Fields[Fields.ChangePer].toLocaleLowerCase()};RoomManager.prototype.isTimeField=function(field){var result=false;if(!!field!==false){switch(field.toLocaleLowerCase()){case Fields[Fields.AskTimestamp].toLocaleLowerCase():case Fields[Fields.BidTimestamp].toLocaleLowerCase():case Fields[Fields.MidTimestamp].toLocaleLowerCase():case Fields[Fields.LastTimestamp].toLocaleLowerCase():result=true;break;default:result=false}}return result};RoomManager.prototype.registerRooms=function(){var elements=this.domWatcher.collectRoomElements();var exchageSwap=this.getExchangeSwap();for(var _i=0,elements_1=elements;_i<elements_1.length;_i++){var domElement=elements_1[_i];var roomId=domElement.getAttribute("data-room");if(this.getRoomItemByRoomId(roomId)===null){var requestItem=this.createRequestMessageFromDomElement(domElement,exchageSwap);if(requestItem!==null){this.activeRequestMessages.push(requestItem);var newRoom=new Room(this.roomSettings,requestItem);var concernedRoomElements=this.domWatcher.getRoomElementsByRoomId(newRoom.pushItem.payload.room);for(var _a=0,concernedRoomElements_1=concernedRoomElements;_a<concernedRoomElements_1.length;_a++){var roomElement=concernedRoomElements_1[_a];var field=this.domWatcher.getRoomElementAttributeValue(roomElement,"data-field");var factor=parseFloat("1");var factorString=this.domWatcher.getRoomElementAttributeValue(roomElement,"data-factor");if(!!factorString!==false){factor=parseFloat(factorString)}if(factor!==1){var expression=new Expression();expression.target=Fields[Fields.float1];expression.fn="${"+field.toLocaleLowerCase()+"}*"+factorString;requestItem.payload.expressions.push(expression)}var paylodId=this.domWatcher.getRoomElementAttributeValue(roomElement,"data-item");var maxRows=this.domWatcher.getRoomElementAttributeValue(roomElement,"data-maxrows");var animationType=this.domWatcher.getRoomElementAttributeValue(roomElement,"data-table");if(!!paylodId===false){continue}var observerId=new RoomObserverDomIdentifier(paylodId);if(!!observerId!==false&&this.isObserverAlreadySetted(observerId,newRoom,animationType)===false){var settings=new RoomObserverSettings();settings.animationSettings=UserConfigManager.getConfigurationObject("AnimationSettings");settings.formatterSettings=UserConfigManager.getConfigurationObject("FormatterSettings");settings.pageSettings=UserConfigManager.getConfigurationObject("PageSettings");if(!!maxRows!==false){settings.maxRows=parseInt(maxRows);settings.flashColor=this.pageSettings.flashColor||null;settings.flashTime=this.pageSettings.flashTime||null;settings.fadeTime=this.pageSettings.fadeTime||null}var observer=MDSnG.Utilities.RoomObserverFactory.createObserver(observerId,this.roomSettings,animationType,settings);observer.setRoomElements(this.domWatcher.getRoomElementsByRoomIdAndAnimationType(roomId,animationType));observer.setFormatter();newRoom.addRoomObserver(observer)}}this.activeRooms.push(newRoom)}}}};return RoomManager}());RoomManager_1.RoomManager=RoomManager})(RoomManager=MDSnG.RoomManager||(MDSnG.RoomManager={}))})(MDSnG||(MDSnG={}));/*
 * @license  Version 2.0.0 (11-05-2018)
 */
var MDSnG;(function(b){var a;(function(d){var g=b.Utilities.Logger;var j=b.Utilities.UserConfigManager;var f=b.Model.ConnectionOptions;var e=b.ConfigurationManager.ConfigManager;var i="mdsng-api01.cloud1.finanzennet.de";var h=9000;var c=(function(){function k(n,m){this.isRealtimePage=false;this.configurationManager=new e();this.configObject=e.getConfiguration();var l=j.getConfigurationObject(this.configObject,"ConnectionOptions");if(l!==null){this.connectionOptions=new f(l.serverUri,l.serverPort,l.stream)}else{this.connectionOptions=new f(i,h)}}k.prototype.connect=function(){if(!!this.connectionOptions!==false){this.connectionManager=new b.ConnectionManager.ConnectionManager(this.connectionOptions,this.configObject);this.connectionManager.connect()}else{g.log("the connection failed ....")}};k.prototype.disconnect=function(l){this.connectionManager.disconnect()};k.prototype.addInstrument=function(l){this.connectionManager.socket.emit("join",l)};k.prototype.createPushRequestItem=function(o,n,l,m){return this.connectionManager.roomManager.createPushRequestItem(o,n,l,m)};k.prototype.removeInstrument=function(l){};k.prototype.getConnectionSocket=function(){};k.prototype.leaveAll=function(){this.connectionManager.leaveAll()};k.prototype.reconnect=function(){this.connectionManager.reconnect()};k.prototype.mockConnect=function(){if(!!this.connectionOptions!==false){this.connectionManager=new b.ConnectionManager.ConnectionManager(this.connectionOptions,this.configObject);this.connectionManager.mockConnect()}else{g.log("mockConnction failed ....")}};return k}());d.ClientApi=c})(a=b.ClientApi||(b.ClientApi={}))})(MDSnG||(MDSnG={}));